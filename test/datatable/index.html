<link rel="stylesheet" href="/dist/neutrine.css">
<link rel="stylesheet" href="/bower_components/siimple/dist/siimple.min.css">
<script type="text/javascript" src="/node_modules/react/umd/react.development.js"></script>
<script type="text/javascript" src="/node_modules/react-dom/umd/react-dom.development.js"></script>
<script type="text/javascript" src="/node_modules/@kofijs/request/kofi-request.js"></script>

<script type="text/javascript" src="/dist/neutrine.js"></script>

<div class="siimple-h2">DataTable</div>
<div id="root" class=""></div>
<script type="text/javascript">
    //Testing element
    let table = null;
    //Function to parse the salary
    let parseSalary = function (value) {
        return parseInt(value.replace("$", "").replace(/\,/g, ""));
    };
    //Import data
    kofi.request({"url": "/datatable/data.json", "json": true}, function (error, response, data) {
        //console.log(body);
        //Testing props
        let testProps = {
            "props": {
                "striped": {
                    "type": "boolean",
                    "defaultValue": true
                },
                "border": {
                    "type": "boolean",
                    "defaultValue": false
                },
                "hover": {
                    "type": "boolean",
                    "defaultValue": false
                },
                "usePagination": {
                    "type": "boolean",
                    "defaultValue": true
                },
                "height": {
                    "type": "string",
                    "options": ["200px", "400px", "600px"],
                    "defaultValue": null
                }
            },
            "render": function (newProps, reference) {
                //Initialize the columns list
                let columns = Object.values({
                    "name": {
                        "title": "Name",
                        "key": 0,
                        "sortable": true,
                        "visible": true,
                        "className": null,
                        "style": null,
                        "headerClassName": null,
                        "headerStyle": null,
                        "render": null
                    },
                    "position": {
                        "title": "Position",
                        "key": 1,
                        "sortable": true,
                        "visible": true
                    },
                    "office": {
                        "title": "Office",
                        "key": 2,
                        "sortable": true,
                        "visible": true
                    },
                    "startDate": {
                        "title": "Start Date",
                        "key": 4,
                        "sortable": false,
                        "visible": true
                    },
                    "salary": {
                        "title": "Salary",
                        "key": 5,
                        "sortable": true,
                        "visible": true,
                        "sort": function (a, b) {
                            return (parseSalary(a[5]) < parseSalary(b[5])) ? -1 : 1;
                        }
                    }
                });
                //Return the table testing element
                return React.createElement(Neutrine.DataTable, {
                    "ref": reference,
                    "data": data,
                    "columns": columns,
                    "height": newProps.height,
                    "striped": newProps.striped,
                    "border": newProps.border,
                    "hover": newProps.hover,
                    "usePagination": newProps.usePagination,
                    "rowClassName": function (row, index) {
                        return (parseSalary(row[5]) < 100000) ? "siimple-table-row--warning" : "";
                    }
                });
            }
        };
        //Mount the testing component
        table = ReactDOM.render(React.createElement(Neutrine.Test, testProps), document.getElementById("root"));
    });
</script>

